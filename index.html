<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Concours de Pêche Pro</title>
    
    <script src="https://www.gstatic.com/firebasejs/10.7.1/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/10.7.1/firebase-firestore-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/10.7.1/firebase-auth-compat.js"></script>
    
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://unpkg.com/lucide@latest"></script>
</head>
<body class="bg-blue-900 text-white font-sans">

    <div id="app" class="max-w-md mx-auto p-4">
        </div>

    <script>
        // Ta config officielle récupérée de tes paramètres Firebase
        const firebaseConfig = {
            apiKey: "AIzaSyB44m6DoeyQSNMctS0hKLpaPR5vNOTNsw0", 
            authDomain: "concours-peche.firebaseapp.com",
            projectId: "concours-peche",
            storageBucket: "concours-peche.firebasestorage.app",
            messagingSenderId: "376446532224",
            appId: "1:376446532224:web:4f9c1ffd2f4fe3ef450465"
        };

        // INITIALISATION CRUCIALE
        firebase.initializeApp(firebaseConfig);
        const db = firebase.firestore();
        const auth = firebase.auth();

        // Gestion de l'affichage
        auth.onAuthStateChanged((user) => {
            const root = document.getElementById('app');
            if (user) {
                // PAGE PRINCIPALE APRES CONNEXION
                root.innerHTML = `
                    <div class="text-center p-8 bg-white rounded-3xl shadow-xl text-blue-900">
                        <h1 class="text-2xl font-black mb-4 uppercase">Concours Connecté</h1>
                        <p class="mb-8 font-bold text-emerald-600">Bienvenue, ${user.email}</p>
                        <button onclick="firebase.auth().signOut()" class="bg-red-500 text-white p-4 rounded-xl w-full font-bold">DÉCONNEXION</button>
                    </div>`;
            } else {
                // PAGE DE CONNEXION
                root.innerHTML = `
                    <div class="bg-white p-8 rounded-[2rem] shadow-2xl text-blue-900 mt-20">
                        <h2 class="text-3xl font-black mb-8 text-center uppercase tracking-tighter">Accès Concours</h2>
                        <input id="email" type="email" placeholder="Email" class="w-full border-2 p-4 rounded-xl mb-4 font-bold outline-none border-blue-100 focus:border-blue-600">
                        <input id="pass" type="password" placeholder="Mot de passe" class="w-full border-2 p-4 rounded-xl mb-6 font-bold outline-none border-blue-100 focus:border-blue-600">
                        <button onclick="login()" class="w-full bg-blue-600 text-white font-black py-4 rounded-xl shadow-lg uppercase transition-transform active:scale-95">Se Connecter</button>
                    </div>`;
            }
        });

        // Fonction de connexion
        window.login = async () => {
            const email = document.getElementById('email').value;
            const pass = document.getElementById('pass').value;
            try {
                await auth.signInWithEmailAndPassword(email, pass);
            } catch (e) {
                alert("Erreur de connexion : " + e.message);
                console.error(e);
            }
        };
    </script>
</body>
</html>
